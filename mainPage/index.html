<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <title>JResiduenrechner</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
        <link rel="shortcut icon" type="image/icon" href="icon.png">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<!--		<script language="javascript" type="text/javascript" src="main.js"></script>-->
        <script type="text/javascript">

        function relevantData(element) {
            if (element.type == "text")
                return element.value != "" ? element.value: "null";
            if (element.type == "checkbox")
                return element.checked;
            return "nul";
        }

    	function loadPHPtoDiv(phpFile, outputDiv, loadData) {
    	    //alert("called with " + phpFile + ", " + outputDiv + ", " + loadData);
    	    let formData = Array.from(document.getElementsByClassName("II"))
					.reduce(
						(data, element) => {
							// Add the current field to the object.
							data[element.id] = relevantData(element);
							return data;
						}, {}
					);
            formData["loadData"] = loadData;
        	jQuery.ajax({
				url: phpFile + ".php",
				data: formData,
				datatype: "json", type: "POST",
				success: function (data) {
					//alert(data);
					document.getElementById("ausgabe" + outputDiv).innerHTML = data;
				}
       		});
    	}

    	</script>

    </head>
    <body>
        <h1> Residuenrechner </h1>

        <div id = constDiv>
            <form>
                <a>f(<a>
                <input class="II" type="text" id="workVariable" size="3">
                <a>) = <br></a>
                <input class="II" type="text" id="formel" size="80">
            </form>
            <br />
            <button onclick = "loadPHPtoDiv('Ausgabe', 1, false)"> Residuen berechnen </button>
            <button onclick = "loadPHPtoDiv('VariableList', 2, true)"> Variablenliste aktualisieren </button>

             <Button onclick="loadPHPtoDiv('Ausgabe', 3, true)"> Aktualisieren </Button>
        </div>

        <div id = ausgabe1></div>
        <div id = ausgabe2></div>
        <div id = ausgabe3></div>
<!--
        <footer>
            <p>&#x00A9; 2019 jgeigers.de</p>
            <p class="foot">
                Diese Website ist noch in Bearbeitung! Einige Funktionen k√∂nnen fehlerhaft sein.
            </p>
			<a href="impressum">Impressum</a>
        </footer>-->
    </body>
</html>